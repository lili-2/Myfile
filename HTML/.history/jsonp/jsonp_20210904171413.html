<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script type="text/javascript">
    var updata = function(data){
        alert('我是本地函数，可以被跨域的remote.js文件调用，远程js带来的数据是：' + data.result);
    };
    </script>
    <script type="text/javascript" src="https://wis.qq.com/weather/common?source=pc&weather_type=observe|forecast_1h|forecast_24h|index|alarm|limit|tips|rise&province=陕西&city=西安&callBack=updata"></script>
</head>
<body>
</body>
</html -->
(function (global) {
    global.jsonp = function (url, params, callback) {
      let queryParamArr = []
      for (let key in params) {
        if (params.hasOwnProperty(key))
          queryParamArr.push(`${key}=${params[key]}`)
      }
      let callbackFunctionName = 'jsonp_' + Math.random().toString().replace('.', '')
      queryParamArr.push(callbackFunctionName)
  
      let script = document.createElement('script')
      script.src = queryParamArr.join('&')
      document.body.appendChild(script)
  
      global[callbackFunctionName] = function (param) {
        callback(param)
        document.body.removeChild(script)
      }
    }
  })(window)
  
  